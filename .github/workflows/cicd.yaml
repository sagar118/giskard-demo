name: Dev-Environment-CI-CD

on:
  workflow_dispatch:
  push:
    branches:
      - main

permissions:
  contents: read

jobs:
    test:
        name: Test
        runs-on: ubuntu-latest

        steps:
          - name: Checkout Code
            uses: actions/checkout@v3

          - name: Set up Python
            uses: actions/setup-python@v4
            with:
              python-version: 3.9
              cache: 'pipenv'

          - name: Install dependencies
            run: |
              pip install --upgrade pip
              pip install pipenv && pipenv install --system --deploy

          - name: execute test script
            run: python scan.py
            id: test_output
